<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Index</title>
		<link rel="stylesheet" href="<%= pathToCSS %>/normalize.css">
		<link rel="stylesheet" href="<%= pathToCSS %>/covershot.css">

		<script type="text/javascript" src="<%= pathToScripts %>/jquery-1.7.1.min.js"></script>

		<script type="text/javascript" src="<%= pathToScripts %>/shCore.js"></script>
		<script type="text/javascript" src="<%= pathToScripts %>/shBrushJScript.js"></script>
		<link href="<%= pathToCSS %>/shCore.css" rel="stylesheet" type="text/css" />
		<link href="<%= pathToCSS %>/shThemeDefault.css" rel="stylesheet" type="text/css" />
		<style type="text/css">
			ul.summary li:first-child h3 {
				font-size: 14px;
				color: gray;
			}
		</style>
	</head>
	<body>
		<div id="bodyWrapper">
			<header>
				<ul class="summary">
					<li>
						<h1><%= filenameNoDir %></h1>
						<h3><%= filename %></h3>
					</li>
					<li>
						<h1><%= hits %></h1>
						<h3>Hits</h3>
					</li>
					<li>
						<h1><%= misses %></h1>
						<h3>Misses</h3>
					</li>
					<li>
						<h1><%= sloc %></h1>
						<h3>SLoC</h3>
					</li>
					<li>
						<h1>-</h1>
						<h3><%= coverage %>% Covered</h3>
					</li>
				</ul>
			</header>
			<section id="bod">
				<section id="mainContent">
					<script type="syntaxhighlighter" class="brush: js; class-name: 'rounded'"><![CDATA[
						<% for (var i in source) { %> 
							<%= source[i].line %> <% } %> ]]></script>
				</section>
			</section>
		</div>
		<footer> 
			<p>Report generated by <a>Covershot</a> on <%= generated %>.</p> 
		</footer>
		<script type="text/javascript">
			$(document).ready(function(){
				SyntaxHighlighter.all({'cb': function(){
					<% for (var i in source) { %> 
					$('td.covgutter').append('<div class="line number<%= i %> index<%= i - 1 %> alt2">&nbsp;<%= source[i].coverage %>&nbsp;</div>'); <% } %>

					var green = $.parseJSON('<%- JSON.stringify(green) %>');
					$.each(green, function(index, value){
						$('td.gutter div.number'+value).css('background-color', 'rgba(121, 252, 121, 0.62) !important');
						$('td.covgutter div.number'+value).css('background-color', 'rgba(121, 252, 121, 0.62) !important');
						$('div.container div.number'+value).css('background-color', 'rgba(121, 252, 121, 0.62) !important');
					});

					var red = $.parseJSON('<%- JSON.stringify(red) %>');
					$.each(red, function(index, value){
						$('td.gutter div.number'+value).css('cssText', 'background-color: rgba(255, 0, 0, 0.32) !important');
						$('td.covgutter div.number'+value).css('cssText', 'background-color: rgba(255, 0, 0, 0.32) !important; font-weight: bold !important');
						$('td.code div.container div.number'+value).css('cssText', 'background-color: rgba(255, 0, 0, 0.32) !important');
					});
				}});
			});
		</script>
	</body>
</html>